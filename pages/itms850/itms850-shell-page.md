---
title: Shell 접속
sidebar: itms850_sidebar
permalink: itms850-shell-page.html
folder: itms850
---

스마트콤보(ITMS-850)은 컨트롤러 본체는 리눅스 운영체제를 사용하고 있습니다. 디바이스의 운영체제가 제공하는 SSH 프로토콜을 통해서 디바이스 터미널에 접속하면
터치스크린에서 제공하지 못하는 더 많은 항목의 설정정보 조회와 변경이 가능합니다.

## SSH 프로토콜

### 접속정보

SSH 접속을 위한 초기 설정값은 다음과 같습니다.
* Port : 22
* ID : aerix
* Password : !aerix123

### 암호확인

명령어를 실행하는 경우 암호확인 과정이 수행되어야 합니다. 암호는 최대 10자리까지 사용이 가능하며, 초기 값은 ```1234```로 
설정되어 있습니다. 한번 암호 확인이 완료되면 약 5분간은 암호확인 과정없이 명령어 실행이 가능합니다.

## 명령

### 정보조회 명령

디바이스에서 제공하는 정보를 확인하는 명령입니다.

| 명령어 | 설명 |
|-------|------|
| def help | 명령어 사용법 보기 |
| def view | 환경공단 그린링크 동작모드 설정정보 보기 |
| def view aerix | Aerix 다목적 디바이스 동작모드 설정정보 보기 |
| def view name | 컨트롤러 터치스크린 화면에 주여주는 각 입출력 포트의 Alias 명칭 보기 |

### 시스템 명령

디바이스의 동작을 제어하는 명령입니다. 

| 명령어 | 설명 |
|-------|------|
| def factory | 디바이스의 모든 설정값을 초기 출고 상태로 되돌립니다. 디바이스를 반드시 재시작해야만 합니다. |
| def apply | 변경된 설정값을 저장하고, 디바이스에 적용시킵니다. |
| reboot | 디바이스를 재시작합니다. |

### 네트워크 명령

디바이스의 네트워크 정보를 설정하는 명령입니다.

| 명령어 | 기본 설정 | 설명 |
|-------|-----------|------|
| def line [ip/dhcp] | ip | - ip : 디바이스의 네트워크 정보를 수동으로 입력하는 경우 <br> - dhcp : 자동으로 할당받는 경우 |  
| def ip [IP Address] | 192.168.0.245 | IP 주소를 설정합니다. |
| def mask [Subnet Mask] | 255.255.255.0 | Subnet Mask 주소를 설정합니다. |
| def gateway [Gateway Address] | 192.168.0.1 | Gateway 주소를 설정합니다. |
| def dns [DNS Address] | 168.126.63.1 | DNS 서버의 주소를 설정합니다. |

**참고)** dhcp인 경우에 ip,mask,gateway,dns는 설정할 필요가 없습니다.

### 환경공단 그린링크 동작모드 명령

환경공단 그린링크 서버와 연동되기 위한 정보를 설정하는 명령입니다.

| 명령어 | 기본설정 | 설명 |
|-------|----------|-----|
| def bcode [code] | 0000000 | 사업자코드를 설정합니다. 사업자코드는 환경공단으로부터 부여받습니다. |
| def ccode [code] | 000 | 굴뚝코드를 설정합니다. 굴뚝코드는 환경공단으로부터 부여받습니다. <br>일반적으로 배출시설의 개수를 값으로 사용합니다. 예 - 배출시설이 1개인 경우 001 |
| def mcode [code] | AR | 디바이스 제조사 코드를 설정합니다. <br> 환경공단에 등록된 에어릭스의 제조사 코드는 AR입니다. |
| def serverip [ip] | 0.0.0.0 | 환경공단 그린링크 서버의 IP주소를 설정합니다. |
| def serverport [port] | 0 | 환경공단 그린링크 서버의 포트번호를 설정합니다. |
| def listenport [port] | 9090 | 환경공단 그린링크 서버에서 디바이스에 접속할 때 사용할 포트번호를 설정합니다. |
| def password [password] | 1234 | 암호를 설정합니다. |
| def seedkey [key] | - | 환경공단 그린링크 서버와의 패킷 암호화에 사용될 암호화 키 값을 설정합니다. <br> 키 값은 HexString형식으로 입력합니다. |
| def seediv [vector] | - | 환경공단 그린링크 서버와의 패킷 암호화에 사용될 초기 벡터값(Initial Vector)를 설정합니다. <br> 초키 벡터값은 HexString형식으로 입력합니다. |
| def pcode [code] | - | 환경공단으로부터 할당받은 방지시설 코드를 설정합니다. 방지시설 코드는 대문자 P로 시작되며, 4자리의 숫자로 구성되어 있습니다. |
| def pcode disable | - | 방지시설 코드를 삭제합니다. |
| def fcode [1~6][code] | - | 환경공단으로 할당받은 배출시설과 송풍시설을 설정합니다. 총 6개의 시설을 설정하는 것이 가능합니다. (번호 1~6) <br> 배출시설코드는 대문자E로 시작되며, 4자리의 숫자로 구성되어 있습니다. <br> 송풍시설코드는 대문자 F로 시작되며, 4자리의 숫자로 구성되어 있습니다. |
| def fcode [1~6] disable | - | 배출시설 또는 송풍시설 코드를 삭제합니다. |

**참고)** 배출시설 및 송풍시설을 최대 6개까지 설정해서 사용할 수 있습니다. 4개까지는 디바이스의 I/O보드에 내장된 DI(Digital Input)포트에 매핑되며, 나머지 2개는 외부 장치 연결로 매핑시킬 수
있습니다.

### Aerix 다목적 디바이스 동작모드 명령

환경공단 그린링크 서버가 아닌 MQTT 브로커 서버와 연동되기 위한 정보를 설정하는 명령입니다.

| 명령어 | 기본설정 | 설명 |
|-------|----------|-----|
| def mqtt [enable/disable] | disable | MQTT 브로커 서버로 정보를 전송하는 기능의 활성화 여부를 선택합니다. |
| def eui [number] | 0 | EUI값을 설정합니다. EUI는 디바이스 구분을 위한 용도로 사용될 수 있습니다. |
| def gwid [number] | 0 | Gateway ID값을 설정합니다. Gateway ID는 사업장 구분을 위한 용도로 사용될 수 있습니다. |
| def cycle rtd [sec] | 5 | RTD 센서의 측정 주기를 설정합니다. (단위 : 초) |
| def cycle ai [sec] | 2 | AI 포트의 측정 주기를 설정합니다. (단위 : 초) |
| def cycle di [sec] | 2 | DI 포트의 측정 주기를 설정합니다. (단위 : 초) |
| def cycle do [sec] | 2 | DO 포트의 측정 주기를 설정합니다. (단위 : 초) |
| def cycle power [sec] | 10 | 소비 전력량 측정 주기를 설정합니다. (단위 : 초) |
| def dovalue [port][0/1] | 0 | DO(Digital Output)포트의 초기 값을 설정합니다. | 

### 파워미터 명령

전력 소비량 측정과 관련된 정보를 확인하고 설정하는 명령입니다.

| 명령어 | 기본설정 | 설명 |
|-------|----------|-----|
| def callibration | - | 파워미터의 컬리브레이션을 지시합니다. 컬리브레이션 기준 값을 아래의 기준 전압과 기준 전류값을 기초로 부하를 발생시켜 파워미터 스스로 컬리브레이션을 하도록 합니다. |
| def getcalib | - | 파워미터 컬리브레이션 결과 값을 조회합니다. |
| def pvolt [volt] | 220 | 컬리브레이션을 시작할 기준 전압값을 설정합니다. |
| def pcurrent [current] | 25 | 컬리브레이션을 시작할 기준 전류값을 설정합니다. |
| def setcalib [current][volt] | - | 컬리브레이션 값을 직접 입력하여 설정합니다. 현장에서 정전압/정전류 부하를 구현할 수 없는 경우 생산공정에서 측정된 컬리브레이션 값을 직접 입력하여 설정합니다. |
| def pminit | - | 파워미터에 누적되는 소비 전력값을 초기화하여 0W부터 시작하도록 설정합니다. |
| def pmset [power] | 0 | 전력 소비량 초기값을 설정합니다. 이후 측정된 전력 소비량은 초기값에 누적됩니다. |
| def ratio [ratio] | 30 | 외부 CT를 사용하는 경우에 CT의 배율을 설정합니다. |
| def volt [volt] | 380 | 외부 CT를 사용하는 경우 장치의 동작전압을 설정합니다. |
| def phase [single/three] | single | 외부 CT를 사용하는 경우 전압의 상 종류를 설정합니다. |

### I/O제어 명령

I/O제어와 관련된 정보를 설정하는 명령입니다.

| 명령어 | 기본설정 | 설명 |
|-------|----------|------|
| def inspection [on/off] | off | 측정 대상 설비가 점검중인 경우에 환경공단 그린링크 서버에 데이터가 정상이 아님을 알려주기 위해서 사용합니다. 값이 on으로 설정된 경우 그린링크 서버에서는 해당 설비가 점검중인 상태로 인식하게 됩니다. |
| def do [port][0/1] | 0 | I/O보드에 내장된 2개의 DO(Digital Output)포트의 출력을 ON/OFF합니다. 값이 0이면 OFF, 1이면 ON으로 동작합니다. |
| def lcdtime [On Time][Off Time] | 0800 1900 | 컨트롤러의 터치스크린 화면의 ON/OFF 시간을 설정합니다. |
| def settime [YYMMDDhhmmss] | - | 현재시간을 설정합니다. |

### 펌웨어 업데이트 명령

I/O보드 펌웨어를 업데이트하는 명령입니다.

| 명령어 | 설명 |
|-------|------|
| def upload [fw_name] | I/O보드의 업데이트를 실시합니다. | 

### I/O 포트 Alias 설정 명령

컨트롤러의 터치스크린 화면에 표시되는 I/O포트의 명칭을 설정하는 명령입니다.

| 명령어 | 기본설정 | 설명 |
|-------|----------|-----|
| def name business [alias] | 사업자코드 | 사업자코드 영역에 표시될 명칭을 설정합니다. |
| def name chimney [alias] | 굴뚝코드 | 굴뚝코드 영역에 표시될 명칭을 설정합니다. |
| def name rtd [alias] | 온도 | 온도센서 영역에 표시될 명칭을 설정합니다. |
| def name dp [alias] | 차압 | 차압센서 영역에 표시될 명칭을 설정합니다. |
| def name ps [alias] | 압력 | 압력센서 영역에 표시될 명칭을 설정합니다. |
| def name ai1 [alias] | AI(1) | AI 1번 포트 영역에 표시될 명칭을 설정합니다. |
| def name ai2 [alias] | AI(2) | AI 2번 포트 영역에 표시될 명칭을 설정합니다. |
| def name di1 [alias] | DI(1) | DI 1번 포트 영역에 표시될 명칭을 설정합니다. |
| def name di2 [alias] | DI(2) | DI 2번 포트 영역에 표시될 명칭을 설정합니다. |
| def name di3 [alias] | DI(3) | DI 3번 포트 영역에 표시될 명칭을 설정합니다. |
| def name di4 [alias] | DI(4) | DI 4번 포트 영역에 표시될 명칭을 설정합니다. |
| def name do1 [alias] | DO(1) | DO 1번 포트 영역에 표시될 명칭을 설정합니다. |
| def name do2 [alias] | DO(2) | DO 2번 포트 영역에 표시될 명칭을 설정합니다. |
| def name power [alias] | 전력소비량 | 전력소비량 영역에 표시될 명칭을 설정합니다. |
| def name curr [alias] | 전류 | 측정전류 영역에 표시될 명칭을 설정합니다. |

### 명령 실행 예제 

#### 환경공단 그린링크 연동

```
def  bcode  1234567        // 사업자코드 설정

def  ccode  001            // 굴뚝코드 설정

def  serverip  10.101.12.13// 환경공단 그린링크 서버 접속주소

def  serverport  5000      // 환경공단 그린링크 서버 통신포트

def  listenport  9090      // 디바이스 접속 통신포트

def pcode  P0001 // 방지시설 코드 설정

def fcode  1  E0001        // 배출시설 코드 설정
 
def  lcdtime  0800  1900   // 터치스크린 화면 ON/OFF 시간 설정

def  name  ai1  "집진기"   // 터치스크린 화면에 AI 1번 포트의 표시명을 집진기로 변경 
 
def  vi                    // 설정정보 확인

def  vi  name              // 터치스크린 화면 표시명 확인

def  apply                 // 설정 적용
```

#### Aerix 다목적 디바이스 동작모드로 사용

```
def  mqtt enable           // MQTT브로커로 정보 전송 기능 활성화

def  eui  123              // EUI 설정

def  gwid  5678            // Gateway ID 설정

def  vi  aerix             // 설정정보 확인

def  apply                 // 설정 적용
```






